<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ikeflix</title>

<style>
/* --------------------- RESET --------------------- */
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
}

body {
  background-color: #0a0a0a;
  color: #fff;
  overflow-x: hidden;
}

/* --------------------- LOGIN & WELCOME --------------------- */
#welcome-screen, #login-screen {
  height: 100vh;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  gap: 25px;
  animation: fadeIn 0.8s ease-in-out;
}

#welcome-screen h1 {
  font-size: 3rem;
  color: #e50914;
  text-shadow: 2px 2px 8px rgba(0,0,0,0.7);
}

input {
  padding: 12px 16px;
  border-radius: 10px;
  border: none;
  outline: none;
  width: 220px;
  font-size: 1rem;
}

button {
  padding: 14px 20px;
  background-color: #e50914;
  border: none;
  border-radius: 8px;
  color: #fff;
  font-weight: bold;
  cursor: pointer;
  transition: 0.3s;
  font-size: 1rem;
}

button:hover {
  background-color: #f6121d;
}

/* --------------------- APP --------------------- */
#app { display: none; }

/* --------------------- TOPBAR --------------------- */
.topbar {
  position: fixed;
  top: 0;
  width: 100%;
  height: 60px;
  background: rgba(0,0,0,0.85);
  backdrop-filter: blur(6px);
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 0 30px;
  z-index: 100;
  box-shadow: 0 2px 15px rgba(0,0,0,0.5);
}

.topbar button {
  background: transparent;
  color: #fff;
  font-weight: bold;
  font-size: 1rem;
  padding: 6px 12px;
  border-radius: 6px;
  transition: 0.2s;
}

.topbar button:hover {
  background-color: rgba(229,9,20,0.8);
}

#profile-icon {
  width: 45px;
  height: 45px;
  border-radius: 50%;
  object-fit: cover;
  border: 2px solid #fff;
  cursor: pointer;
}

/* --------------------- HOME --------------------- */
#big-banner {
  width: 100%;
  height: 400px;
  background-size: cover;
  background-position: center;
  border-bottom: 4px solid #e50914;
  margin-top: 60px;
  border-radius: 0 0 15px 15px;
  box-shadow: inset 0 0 50px rgba(0,0,0,0.7);
}

.movie-row {
  margin-top: 30px;
  padding: 0 30px;
}

.movie-row h2 {
  margin-bottom: 15px;
  font-size: 1.8rem;
}

.movies-container {
  display: flex;
  gap: 15px;
  overflow-x: auto;
  padding-bottom: 20px;
  scroll-behavior: smooth;
}

.movie-item {
  min-width: 220px;
  height: 130px;
  background-size: cover;
  background-position: center;
  border-radius: 12px;
  cursor: pointer;
  transition: transform 0.3s, box-shadow 0.3s;
}

.movie-item:hover {
  transform: scale(1.08);
  box-shadow: 0 8px 20px rgba(0,0,0,0.7);
}

/* --------------------- MOVIE VIEW --------------------- */
#movie-view {
  display: none;
  padding: 20px;
  margin-top: 60px;
  text-align: center;
}

#movie-banner {
  width: 80%;
  max-width: 850px;
  border-radius: 15px;
  box-shadow: 0 6px 20px rgba(0,0,0,0.7);
}

#movie-view button {
  margin-top: 20px;
  padding: 14px 24px;
  font-size: 1.1rem;
}

/* --------------------- SETTINGS --------------------- */
#settings {
  display:none;
  position:fixed;
  top:0; left:0;
  width:100%; height:100%;
  background: rgba(0,0,0,0.9);
  backdrop-filter: blur(5px);
  padding: 40px;
  text-align:center;
  z-index:200;
  overflow-y: auto;
}

#settings h2 {
  margin-bottom: 25px;
  color: #e50914;
}

#settings img {
  border-radius: 20px;
  width: 120px;
  height: 120px;
  object-fit: cover;
  border: 3px solid #fff;
  margin-bottom: 20px;
}

#settings input[type=file] {
  padding: 8px;
  border-radius: 8px;
  border: none;
  background-color: #222;
  color: #fff;
  cursor: pointer;
}

/* --------------------- ANIM --------------------- */
@keyframes fadeIn {
  from {opacity:0;}
  to {opacity:1;}
}
</style>
</head>
<body>

<!-- WELCOME -->
<div id="welcome-screen">
  <h1>Bienvenido a Catflix</h1>
  <button onclick="goLogin()">Continuar</button>
</div>

<!-- LOGIN -->
<div id="login-screen" style="display:none;">
  <h2>Iniciar sesión</h2>
  <input id="user" placeholder="Usuario" />
  <input id="pass" placeholder="Contraseña" type="password" />
  <button onclick="login()">Entrar</button>
</div>

<!-- APP -->
<div id="app">
  <div class="topbar">
    <button onclick="goHome()">Inicio</button>
    <div style="display:flex;align-items:center;gap:15px;">
      <img id="profile-icon" src="default_icon.png" alt="Perfil">
      <button onclick="openSettings()">Ajustes</button>
    </div>
  </div>

  <!-- HOME -->
  <div id="home">
    <div id="big-banner"></div>
    <div class="movie-row">
      <h2>Películas</h2>
      <div class="movies-container" id="movies-list"></div>
    </div>
  </div>

  <!-- MOVIE VIEW -->
  <div id="movie-view">
    <img id="movie-banner" alt="Movie Banner">
    <br>
    <button id="play-btn">Reproducir</button>
  </div>
</div>

<!-- SETTINGS -->
<div id="settings">
  <h2>Ajustes</h2>
  <img id="settings-icon" src="default_icon.png" alt="Icono perfil">
  <br>
  <input type="file" id="icon-upload" accept="image/*">
  <br><br>
  <button onclick="closeSettings()">Cerrar</button>
  <button onclick="logout()">Cerrar Sesión</button>
</div>

<!-- JS -->
<script>
// VARIABLES
const welcomeScreen = document.getElementById('welcome-screen');
const loginScreen = document.getElementById('login-screen');
const app = document.getElementById('app');
const home = document.getElementById('home');
const movieView = document.getElementById('movie-view');
const settings = document.getElementById('settings');

// LOGIN
function goLogin(){ welcomeScreen.style.display='none'; loginScreen.style.display='flex'; }
function login(){
  const user=document.getElementById('user').value;
  const pass=document.getElementById('pass').value;
  if(!user||!pass)return alert("Completa los campos.");
  localStorage.setItem("cat_user",user);
  localStorage.setItem("cat_pass",pass);
  loadApp();
}

function loadApp(){
  welcomeScreen.style.display='none';
  loginScreen.style.display='none';
  app.style.display='block';
  loadProfileIcon();
  loadMovies();
}

function goHome(){ home.style.display='block'; movieView.style.display='none'; }
function openSettings(){ settings.style.display='block'; document.getElementById("settings-icon").src = localStorage.getItem("cat_icon") || "default_icon.png"; }
function closeSettings(){ settings.style.display='none'; }
function logout(){ localStorage.clear(); location.reload(); }

// AUTO LOGIN
window.onload=()=>{ if(localStorage.getItem("cat_user")) loadApp(); };

// PROFILE ICON
function loadProfileIcon(){
  const icon=localStorage.getItem("cat_icon")||"default_icon.png";
  document.getElementById("profile-icon").src=icon;
  document.getElementById("settings-icon").src=icon;
}

document.getElementById("icon-upload").addEventListener("change",function(e){
  const file=e.target.files[0];
  if(!file) return;
  const reader=new FileReader();
  reader.onload=function(event){
    localStorage.setItem("cat_icon",event.target.result);
    loadProfileIcon();
  }
  reader.readAsDataURL(file);
});

// MOVIE VIEW
function openMovie(name){
  home.style.display='none';
  movieView.style.display='block';
  const banner=`Peliculas/${name}/Banner.png`;
  const movie=`Peliculas/${name}/Movie.mp4`;
  document.getElementById("movie-banner").src=banner;
  document.getElementById("play-btn").onclick=()=>{ window.location.href=movie; };
}
</script>

<script src="movies.js"></script>

</body>
</html>
